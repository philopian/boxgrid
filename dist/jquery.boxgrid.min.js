/*!
 * boxgrid - jQuery Plugin
 * Version: 1.0.13
 *
 * Copyright (c) 2014 Heimspiel GmbH, http://www.hmspl.de/
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
!function(a){"use strict";function b(a,b){var c;return function(){var d=this,e=arguments;clearTimeout(c),c=setTimeout(function(){a.apply(d,e)},b)}}function c(a,b,c,d,e,f){var g=0,h=0;if(c+e>b)return!1;for(g=0;f>g;g+=1)for(h=0;e>h;h+=1)if(a[(d+g)*b+(c+h)]===!0)return!1;return!0}function d(a,b,c,d,e,f){var g=0,h=0;for(g=0;f>g;g+=1)for(h=0;e>h;h+=1)a[(d+g)*b+(c+h)]=!0}function e(a,b,c,d,e){var f=a;return c>0&&(f=Math.max(f,Math.floor(e/c))),f=Math.floor(f/b)*b,Math.min(f,d)}function f(a,b,c,d){var e=Math.floor(a/b);return d&&(e=Math.max(c,e)),e}function g(a,b){return 0===a?b:a}function h(a,b,c){return Math.floor((a-b*c)/2)}function i(b,i){var j=[],k=b.width(),l=e(i.minColumns,i.minColSpan,i.minColWidth,i.maxColumns,k),m=f(k,l,i.minColWidth,i.forceMinColWidth),n=g(i.rowHeight,m),o=h(k,l,m),p=0;b.children().each(function(){var b,e=a(this),f=e.data(i.dataColSpanName)||0,g=f,h=e.data(i.dataRowSpanName)||0,k=h,p=e.data(i.dataMinHeightName),q=0,r=0,s=0,t=0;for(f>l&&(f=l),"function"==typeof i.adjustColSpan&&(f=i.adjustColSpan.call(this,e,g,f,m,l)),e.css({position:"absolute"}),e.width(Math.floor(m*f)-i.adjustLeft+i.adjustRight),void 0!==p&&(b=e.find(p),b.length&&(h=Math.max(h,Math.ceil(b.height()/n)))),0===h?e.children().each(function(){q+=a(this).outerHeight()}):h!==parseInt(h,10)&&e.find(h).each(function(){q+=a(this).outerHeight()}),q>0&&(h=Math.ceil(q/n)),"function"==typeof i.adjustRowSpan&&(h=i.adjustRowSpan.call(this,e,g,f,m,k,h,n,l)),e.height(Math.floor(n*h)-i.adjustTop+i.adjustBottom),r=0;!0;r+=1)if(s=r%l,t=Math.floor(r/l),c(j,l,s,t,f,h)){d(j,l,s,t,f,h),0===t?e.addClass(i.rowFirstClass):e.removeClass(i.rowFirstClass),0===s?e.addClass(i.columnFirstClass):e.removeClass(i.columnFirstClass),s+f===l?e.addClass(i.columnLastClass):e.removeClass(i.columnLastClass),e.css({top:Math.floor(t*n+i.adjustTop+i.offsetTop),left:o+Math.floor(s*m+i.adjustLeft+i.offsetLeft)});break}}),p=Math.ceil(j.length/l),b.height(Math.max(0,p*n+i.offsetTop+i.offsetGridHeight)).addClass(i.readyClass)}function j(b,c){this.element=b,this.settings=a.extend({},k,c),this.init()}var k={minColSpan:1,minColumns:1,maxColumns:1/0,minColWidth:0,forceMinColWidth:!1,rowHeight:0,resize:!0,resizeDelay:250,readyClass:"boxgrid-ready",rowFirstClass:"boxgrid-row-first",columnFirstClass:"boxgrid-column-first",columnLastClass:"boxgrid-column-last",dataColSpanName:"colspan",dataRowSpanName:"rowspan",dataMinHeightName:"minHeight",adjustTop:0,adjustRight:0,adjustBottom:0,adjustLeft:0,offsetTop:0,offsetLeft:0,offsetGridHeight:0};a.extend(j.prototype,{init:function(){var c=this;this.settings.resize&&a(window).resize(b(function(){c.resize()},this.settings.resizeDelay)),a(document).ready(function(){c.resize()})},resize:function(){"function"==typeof this.settings.beforeResize&&this.settings.beforeResize.call(this),i(a(this.element),this.settings),"function"==typeof this.settings.afterResize&&this.settings.afterResize.call(this)}}),a.fn.boxgrid=function(b){return this.each(function(){a.data(this,"boxgrid")||a.data(this,"boxgrid",new j(this,b))}),this}}(window.jQuery);